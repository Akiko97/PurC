#!/usr/bin/purc

<!DOCTYPE hvml SYSTEM 'f: FS'>
<hvml target="html">
    <head>
        <base href=$CRTN.base(! "file://$SYS.cwd" ) hvml:silently />
        <title>Foil Test Workshop</title>
        <style hvml:raw>
header h1 {
    color:red;
    text-align:center
}

.column {
    // display:inline-block;
    width:45%;
}

.plain-list {
    list-style-type:none;
}

.case-mark {
    appearance:meter-mark;
    width:1em;
    -foil-candidate-marks:'✗…↷↻✓';
}
        </style>
    </head>

    <body>
        <init as 'cases' with $FS.list_prt("$SYS.cwd/style-cases", '*.html') />

        <header>
            <h1>Foil Test Workshop (totally $DATA.count($cases) cases)</h1>
        </header>

        <archetype name="caseItem">
            <li>
                <meter class="case-mark" id="caseMark$?" value="20" min="0" max="100" low="20" high="80" optimum="90"></meter>
                <span class="case-name">$?</span>
            </li>
        </archetype>

        <div>
            <ul class="plain-list">
                <iterate on $cases>
                    <choose on $STR.substr($?, 0, -5L) >
                        <update on $@ to 'append' with $caseItem />
                        <update on $cases at "[$2%]" with $? />
                    </choose>
                </iterate>
            </ul>
        </div>

        <iterate on $cases>
            <update on "#caseMark$?" at 'attr.value' with {{ $DATA.arith('%', $%, 2) && "0" || "100" }} />
        </iterate>

    </body>

</hvml>

