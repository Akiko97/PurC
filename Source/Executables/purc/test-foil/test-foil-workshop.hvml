#!/usr/bin/purc

<!DOCTYPE hvml SYSTEM 'f: FS'>
<hvml target="html">
    <head>
        <base href=$CRTN.base(! "file://$SYS.cwd" ) hvml:silently />
        <title>Foil Test Workshop</title>
        <style hvml:raw>
header h1 {
    color:red;
    text-align:center
}
.column {
    display:inline-block;
    width:45%;
}
.case-mark {
    appearance:meter-mark;
    width:1em;
}
        </style>
    </head>

    <body>
        <init as 'cases' with $FS.list_prt("$SYS.cwd/style-cases", '*.html') />

        <header>
            <h1>Foil Test Workshop (totally $DATA.count($cases) cases)</h1>
        </header>

        <archetype name="caseItem">
            <p>
                <meter class="case-mark" id="caseMark$?" value="0" min="0" max="100" low="33" high="66" optimum="80"></meter>
                <span class="case-name">$?</span>
            </p>
        </archetype>

        <div>
            <div class="column">
                <iterate on $cases>
                    <choose on $STR.substr($?, 0, -5L) >
                        $STREAM.stdout.writelines($?)

                        <update on $@ to 'append' with $caseItem />
                    </choose>
                </iterate>
            </div>
            <div class="column">
                <iterate on $cases>
                    <choose on $STR.substr($?, 0, -5L) >
                        $STREAM.stdout.writelines($?)

                        <update on $@ to 'append' with $caseItem />
                    </choose>
                </iterate>
            </div>
        </div>

    </body>

</hvml>

